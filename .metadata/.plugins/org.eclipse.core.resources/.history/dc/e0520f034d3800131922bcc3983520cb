'''
Created on Oct 18, 2013

@author: owner
'''

import os.path
import cherrypy
from cherrypy.lib import static
from os import listdir
from os.path import isfile, join

localDir = os.path.dirname(__file__)
absDir = os.path.join(os.getcwd(), localDir)
fileDir = os.path.join(os.getcwd(), "files")


class server:
    
    def __init__(self):
        print("Init")
    def index(self):
        
        top = "<html><body>"
            
        bottom = "<a href='listFiles'>List files</a> </body></html>"
        
        return "".join(top).join(self._createHTML())
        
    def download(self):
        path = os.path.join(absDir, "nerdShit.jpg")
        return static.serve_file(path, "application/x-download",
                                 "attachment", os.path.basename(path))
        
    def listFiles(self):
        onlyfiles = [ f for f in listdir(fileDir) if isfile(join(fileDir, f)) ]
        return (onlyfiles)
    
    def _createHTML(self):
        return " "
        
    listFiles.exposed = True
    download.exposed = True
    index.exposed = True
